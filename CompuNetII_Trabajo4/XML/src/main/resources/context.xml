<?xml version="1.0" encoding="UTF-8"?>
<!--
  Este es el archivo de configuración de Spring para la versión XML.
  Define todos los beans y cómo se inyectan sus dependencias.
-->
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- BEANS DE SERVICIO -->
    <bean id="courseService" class="org.example.service.CourseService">
        <!--
          Inyección de dependencias por constructor. Spring le pasará los beans
          'courseRepository' y 'studentRepository' al constructor de CourseService.
        -->
        <constructor-arg ref="courseRepository"/>
        <constructor-arg ref="studentRepository"/>
    </bean>

    <bean id="studentService" class="org.example.service.StudentService">
        <!--
          CORRECCIÓN LÓGICA:
          Anteriormente, este servicio dependía de 'courseService'. Ahora, se ha corregido
          para que dependa directamente de los repositorios que necesita: 'studentRepository'
          y 'courseRepository'. Esto puede simplificar las dependencias.
        -->
        <constructor-arg ref="studentRepository" />
        <constructor-arg ref="courseRepository" />
    </bean>

    <!-- BEANS DE REPOSITORIO -->
    <bean id="courseRepository"
          class="org.example.repository.CourseRepository"
    />

    <bean id="studentRepository"
          class="org.example.repository.StudentRepository"
          init-method="initRepo"/>
    <!--
      'init-method' le dice a Spring que llame al método 'initRepo'
      justo después de crear la instancia de StudentRepository.
    -->
</beans>
